{% extends "myapp/layout.html" %}

<style>





</style>
{% block content %}

 
<q-breadcrumbs style="color: red; cursor: pointer">
    <q-breadcrumbs-el label="File Maintenance /" onclick="window.location.href='{% url 'settings_panel' %}' " icon="settings" />
    <q-breadcrumbs-el label="Offense " icon="all_inbox" />
    <q-breadcrumbs-el label=" /"  />
</q-breadcrumbs>

<div class="row animated fadeInDown" style="padding: 10px;">
    <div style="width: 100% ">
         <legend style="font-size: 25px; color:#34495E;font-weight: 900">List of Violation</legend>
    </div>
    <div class="row animated fadeInDown">
         <span style="color: #34495E">
                <small>Offenses of employee rules and the conduct is committed off-duty and not on University property, the University may discipline the employee, up to and including discharge.</small>
         </span>
    </div>
</div>






<div class="row" style="width:100%;margin-top: 20px;  ">
 <!-- @click="new_bus" -->
 <q-btn color="red-8" icon="add" label="add Type of Offense"  @click="create_new_type" ></q-btn>

</div>





<div class="row animated fadeInDown" style="padding: 5px;">
        <div style="width: 100% ">
             <legend style="font-size: 20px; color:#34495E;font-weight: 900">Type of Violation</legend>
        </div>
        




        


        <div class="row" style="width: 100%">


                      

            <div class="col-xs-12 col-sm-4 col-md-4 col-lg-3" v-for="item in typeofviolation" style="padding: 10px;">
    
                <q-list  >
    
                    <q-item clickable style="width: 100% ; border-radius: 5px; -webkit-box-shadow: 0px 0px 2px 1px rgba(0,0,0,0.12);
                    -moz-box-shadow: 0px 0px 2px 1px rgba(0,0,0,0.12);
                    box-shadow: 0px 0px 2px 1px rgba(0,0,0,0.12); background-color:  #273746;">
                        <q-item-section>
                          <q-item-label style="font-size: 18px; color:white;font-weight: 900">${item.typeofviolation}</q-item-label>
                          <q-item-label caption lines="2"></q-item-label>
                        </q-item-section>
                
                        <q-item-section side top>
                          <q-item-label caption style="color: white;">
                                ${item.percentage}% Deduction
                              <q-icon style="width: 100%;text-align:center;color: white;font-size: 25px; "  @click="edit_minor(item.id)"  name="edit"></q-icon> 
                              <q-icon style="width: 100%;text-align:center;color: red;font-size: 25px; "  @click="delete_minor(item.id)"  name="delete"></q-icon> 
                            </q-item-label>
                         
                        </q-item-section>
                      </q-item>
                </q-list>
    
    
              </div>
    
    
             
    
    
    
    
    
    
        </div>
    </div>


 

    

    <div class="row" style="width:100%;margin-top: 20px;  ">
      <!-- @click="new_bus" -->
      <q-btn color="red-8" icon="add" label="add Offense"   @click="new_violation"></q-btn>
     
     </div>


     <!-- <div class="row" style="width:100%;  margin-top: 10px;;">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> 
         v-model="search" @input="SearchDepartment" 
          <q-input outlined label="Search"  v-model="modelsearchoffense" @input="SearchOffense"    >
             <template v-slot:append>
               <q-icon name="search" ></q-icon>
             </template>
           </q-input>
     
    
     </div>
      hai 
     <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
       <div class="row">
         
         <div class="col-xs-3 col-sm-3 col-md-2 col-lg-2" style="padding: 20px;; color: gray; font-size: 15px;;">
            Filter
          <q-icon name="filter_list" style="font-size: 20px;;"></q-icon>
           
         </div>
         
         <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
         
            <q-select v-model="filterOffense" outlined :options="OptionMinorGrave" label="Select Type of Offense"  ></q-select>
         </div> -->
         
         
       <!-- </div>
     </div>
     
    </div> -->
    


    <div class="row animated fadeInDown" style="padding: 10px;">


      <q-table

     
style="width: 100%"
:data="list_of_violations"
:columns="columns"
row-key="id"
selection="single"
:selected.sync="selected"
 :filter="terms"
    
    title="List of Offenses"

>
<!-- hai -->

<template  slot="top-selection" >
  <q-btn-group>
    <q-btn label="Edit" color="orange" icon="edit" @click="edit_violation(selected)"></q-btn>
    <q-btn label="delete" icon="delete" color="red"  @click="delete_violation(selected)"></q-btn>
    
  </q-btn-group>
   
</template>



     <template v-slot:top-right>
        <q-select v-model="filterOffense" style="width: 200px;" dense debounce="300" outlined :options="OptionMinorGrave" label="Select Type of Offense"  ></q-select>
     
<q-input outlined v-model="terms" style="width: 200px;padding: 10px;"  filled  dense debounce="300"  placeholder="Search">
        <template v-slot:append>
          <q-icon name="search" ></q-icon>
        </template>
    </q-input>
  
  
  
  
 


       


 
  </template>



</q-table>









            <!-- <div style="width: 100% ">
                 <legend style="font-size: 20px; color:#34495E;font-weight: 900">List of Violation</legend>
                 <q-linear-progress indeterminate v-if="loadingOffense"  color="grey"></q-linear-progress>
            </div>
            



            
            <div class="row" style="width: 100%">


                
               
                          


                <div class="col-xs-12 col-sm-4 col-md-4 col-lg-3" v-for="item in list_of_violations" style="padding: 10px;">
        
                    <q-list  >
        
                        <q-item clickable style="width: 100% ; border-radius: 5px; -webkit-box-shadow: 0px 0px 2px 1px rgba(0,0,0,0.12);
                        -moz-box-shadow: 0px 0px 2px 1px rgba(0,0,0,0.12);
                        box-shadow: 0px 0px 2px 1px rgba(0,0,0,0.12); background-color:  #273746">
                    
                            <q-item-section>
                              <q-item-label style="font-size: 18px; color:white;font-weight: 900">${item.NatureofOffense}</q-item-label>
                              <q-item-label caption lines="2"></q-item-label>
                            </q-item-section>
                    
                            <q-item-section side top>
                              <q-item-label caption style="color: white;">
                                    ${item.graveofminor}
                                  <q-icon style="width: 100%;text-align:center;color: white;font-size: 25px; "  @click="edit_violation(item.id)"  name="edit"></q-icon> 
                                  <q-icon style="width: 100%;text-align:center;color: red;font-size: 25px; "  @click="delete_violation(item.id)"  name="delete"></q-icon> 
                                </q-item-label>
                             
                            </q-item-section>
                          </q-item>
                    </q-list>
        
        
                  </div>
        
        
        
        
        
        
        
        
            </div>
        </div> -->
    

        








<q-dialog v-model="modal_minor" persistent>
    <q-card style="width: 900px;">
      <q-card-section class="row items-center" style="padding: 30px;">
          <div class="row animated fadeInDown" style="width: 100%; padding: 5px;">
             
            <legend style="font-size: 25px; color:#34495E;font-weight: 900">New Type of Offense</legend>
          </div>
          <div class="row animated fadeInDown" style="width: 100%; padding: 5px;">
                <q-input style="width: 100%;" v-model="model_type" type="text" outlined label="Enter Type of Violation" ></q-input>
          </div>
          <div class="row animated fadeInDown" style="width: 100%;  padding: 5px; ">
              <q-input style="width: 100%;"  v-model="model_percentage_deduction" type="number" outlined label="Percentage Deduction" ></q-input>
        </div>
          
      </q-card-section>
      <q-card-actions align="right">
        <q-btn flat label="Cancel" color="grey" v-close-popup ></q-btn>
        <q-btn flat label="save" color="red-8" v-close-popup  @click="save"></q-btn>
      </q-card-actions>
    </q-card>
  </q-dialog>


  
<q-dialog v-model="modal_edit_minor" persistent>
        <q-card style="width: 900px;">
          <q-card-section class="row items-center" style="padding: 30px;">
              <div class="row animated fadeInDown" style="width: 100%; padding: 5px;">
                 
                <legend style="font-size: 25px; color:#34495E;font-weight: 900">New Type of Offense</legend>
              </div>
              <div class="row animated fadeInDown" style="width: 100%; padding: 5px;">
                    <q-input style="width: 100%;" v-model="edit_model_type" type="text" outlined label="Enter Type of Violation" ></q-input>
              </div>
              <div class="row animated fadeInDown" style="width: 100%;  padding: 5px; ">
                  <q-input style="width: 100%;"  v-model="edit_model_percentage_deduction" type="number" outlined label="Percentage Deduction" ></q-input>
            </div>
              
          </q-card-section>
          <q-card-actions align="right">
            <q-btn flat label="Cancel" color="grey" v-close-popup ></q-btn>
            <q-btn flat label="save" color="red-8" v-close-popup  @click="update_minor"></q-btn>
          </q-card-actions>
        </q-card>
      </q-dialog>



      <q-dialog v-model="modal_create_violation" persistent>
            <q-card style="width: 900px;">
              <q-card-section class="row items-center" style="padding: 30px;">
                  <div class="row animated fadeInDown" style="width: 100%; padding: 5px;">
                     
                    <legend style="font-size: 25px; color:#34495E;font-weight: 900">New Offense</legend>
                  </div>
                  <div class="row animated fadeInDown" style="width: 100%; padding: 5px;">
                        <q-input style="width: 100%;" v-model="model_violation" type="text" outlined label="Enter Name of Violation" ></q-input>
                  </div>
                  <div class="row animated fadeInDown" style="width: 100%;  padding: 5px; ">
                        <q-select outlined style="width: 100%" v-model="model_option_type" :value="model_option_type" :options="option_type" label="Type of Violation" />
                </div>
                  
              </q-card-section>
              <q-card-actions align="right">
                <q-btn flat label="Cancel" color="grey" v-close-popup ></q-btn>
                <q-btn flat label="save" color="red-8" v-close-popup  @click="submit_new_violation"></q-btn>
              </q-card-actions>
            </q-card>
          </q-dialog>


          <q-dialog v-model="modal_edit_violation" persistent>
                <q-card style="width: 900px;">
                  <q-card-section class="row items-center" style="padding: 30px;">
                      <div class="row animated fadeInDown" style="width: 100%; padding: 5px;">
                         
                        <legend style="font-size: 25px; color:#34495E;font-weight: 900">Edit Offenses</legend>
                      </div>
                      <div class="row animated fadeInDown" style="width: 100%; padding: 5px;">
                            <q-input style="width: 100%;" v-model="model_violation_edit" type="text" outlined label="Enter Name of Violation" ></q-input>
                      </div>
                      <div class="row animated fadeInDown" style="width: 100%;  padding: 5px; ">
                            <q-select outlined style="width: 100%" v-model="model_option_type_edit" :value="model_option_type_edit" :options="option_type" label="Type of Violation" />
                    </div>
                      
                  </q-card-section>
                  <q-card-actions align="right">
                    <q-btn flat label="Cancel" color="grey" v-close-popup ></q-btn>
                    <q-btn flat label="save" color="red-8" v-close-popup  @click="update_violation"></q-btn>
                  </q-card-actions>
                </q-card>
              </q-dialog>

      
    





{% endblock %}

{% block script %}

<script>
new Vue({
            el: '#app',
            delimiters: ['${','}'],
            data: function () {
              return {
                drawerState: false,
                pic_user : 'http://res.heraldm.com/phpwas/restmb_jhidxmake.php?idx=5&simg=201701181539234376570_20170118154018_02.jpg',
                dash : {
            backgroundColor : '#273746',
           color : 'white'
           },
           
           Deliberation : {
           backgroundColor : '#273746',
           color : 'white',
       },

       employee : {
            backgroundColor : '#273746',
           color : 'white'
           },
           performance_evaluation : {
           backgroundColor : '#273746',
           color : 'white',
        
       },
       settings : {
            backgroundColor : '#273746',
           color : 'white'
           },
           Deliberation : {
           backgroundColor : '#273746',
           color : 'white',
       },
       report : {
      
      
           backgroundColor : '#273746',
           color : 'white',
       },
       concern : {
           backgroundColor : '#273746',
           color : 'white',
       },
            modal_edit_violation : false,
                model_violation_edit : '',
                model_option_type : '',
                model_violation : '',
                option_type : [],
                modal_create_violation :false,
                modal_edit_minor : false,
                edit_model_type : '',
                edit_model_percentage_deduction : '',
                modal_minor : false,
                model_type : '',
                model_percentage_deduction : '',
                global_hostname : '',
                token : '',
                  list_of_violations : [

                 
   
                  ],
                typeofviolation : [
                    {
                        
                    }

                ],
           
       
                
       
                id_to_update_minor : 0,
                id_to_update_violation : 0,
                showing : false,
                showing2 : false,
                model_option_type_edit : '',
                modelsearchoffense : '',
                rawViolation  : [],
                OptionMinorGrave : [],
                  filterOffense : '',
                  loadingOffense : true,
                  
columns: [
          
          {
          name: 'desc',
          required: true,
          label: 'Name of Violation',
          align: 'left',
          field: row => row.NatureofOffense,
          format: val => `${val}`,
          sortable: true
        },
        { name: 'FirstName', align: 'center', label: 'Type ov Violation', field: 'graveofminor', sortable: true },
        
      ],
      data: [
               
      ],
selected : [],

terms: ''
                // state

                
              }


            },
            beforeMount () {
                if(innerWidth < 1017){
                    this.drawerState = false
                }
            },
            methods : {
              logout(){
              axios.post(`${this.global_hostname}/logout/`,{
                  
                   headers: {
                               'Content-Type': 'application/json',
                                  'X-CSRFToken': this.token
                   }
                  
              })
              .then(res => {
                  window.location.replace(`${this.global_hostname}/login/`)
                
              })
              .catch(err => {
                  
              })
            },
            SearchOffense(){
              var data = this.modelsearchoffense.toLowerCase()
             this.loadingOffense= true
             
              var info = this.rawViolation.filter(
                    (element)=> {

                        return element.NatureofOffense.toLowerCase().includes(data)
                    }
              )
              
              this.list_of_violations = info
              setTimeout(() => {
                  this.loadingOffense = false
              }, 2000);

            },
            
                update_violation(){
                    var type = this.model_option_type_edit
                    var minorgrave = this.model_option_type_edit 
                    var data = this.typeofviolation
                    var id = data.filter(
                        function(el){
                            return el.typeofviolation == type
                        }
                    )
                    console.log('update')
                    console.log(id)

                    var payload = {
                        "NatureofOffense": `${this.model_violation_edit}`,
                        "graveofminor": `${this.global_hostname}/api/MINOR_OR_GRAVE/${id[0].id}/`,
                    }
                    axios.put(`${this.global_hostname}/api/POST_VIOLATIONS/${this.id_to_update_violation}/`,payload,{
                        
                         headers: {
                                     'Content-Type': 'application/json',
                                        'X-CSRFToken': this.token
                         }
                        
                    })
                    .then(res => {
                        console.log(res)

                        this.get_violation()
                                this.get_minor_or_grave()
                        this.$q.notify({ //put dollor sign(q)
                              message: `Successfully Updated!`,
                              timeout: 10000, // in milliseconds; 0 means no timeout

                              color: 'orange',
                              textColor: 'white', // if default 'white' doesn't fit
                             icon: 'check', //or  avatar: 'statics/boy-avatar.png',

                             position: 'top', // 'top', 'left', 'bottom-left' etc.

                              })
                    })
                    .catch(err => {
                        console.error(err); 
                        this.$q.notify({ //put dollor sign(q)
                              message: `Unsuccessfull!`,
                              timeout: 10000, // in milliseconds; 0 means no timeout

                              color: 'red',
                              textColor: 'white', // if default 'white' doesn't fit
                             icon: 'error', //or  avatar: 'statics/boy-avatar.png',

                             position: 'top', // 'top', 'left', 'bottom-left' etc.

                              })
                    })
                },
                edit_violation(data){
                  var id = data[0].id
                    //here
                    this.id_to_update_violation = id
                    this.modal_edit_violation = true

                    
                    var d = this.list_of_violations.filter(function(e){
                        return e.id == id
                    })
                    console.log('violation')
                    console.log(d)
                    this.model_violation_edit = d[0].NatureofOffense
                    this.model_option_type_edit = d[0].graveofminor
                    

                },

                delete_violation(data){

                  var id = data[0].id

                  this.$q.dialog({
        title: 'Confirm',
        message: 'Would you like to delete this file?',
        cancel: true,
        persistent: true
      }).onOk(() => {
        // console.log('>>>> OK')


        axios.delete(`${this.global_hostname}/api/Get_VIOLATIONS/${id}/`,{
         
           headers: {
                 'Content-Type': 'application/json',
                  'X-CSRFToken': this.token
           }
          
        })
                    .then(res => {
                        console.log(res)

                                      this.$q.notify({ //put dollor sign(q)
                message: `Successfuly Deleted!`,
                timeout: 3000, // in milliseconds; 0 means no timeout

                color: 'green',
                textColor: 'white', // if default 'white' doesn't fit
              icon: 'check', //or  avatar: 'statics/boy-avatar.png',

              position: 'top', // 'top', 'left', 'bottom-left' etc.

              })



                        this.get_violation()
                                this.get_minor_or_grave()
                      
                    })
                    .catch(err => {
                        console.error(err); 

                        
                    })



      }).onOk(() => {
        // console.log('>>>> second OK catcher')
      }).onCancel(() => {
        // console.log('>>>> Cancel')
      }).onDismiss(() => {
        // console.log('I am triggered on both OK and Cancel')
})
                   

                },
                submit_new_violation(){
                  
                    // this.model_option_type
                    var type = this.model_option_type
                    
                    var data = this.typeofviolation
                    var id = data.filter(
                        function(el){
                            return el.typeofviolation == type
                        }
                    )
                    console.log(id)
                    var payload = {
                        "NatureofOffense": this.model_violation,
                        "graveofminor": `${this.global_hostname}/api/MINOR_OR_GRAVE/${id[0].id}/`,
                    }
                    console.log(payload)

                    axios.post(`${this.global_hostname}/api/POST_VIOLATIONS/`,payload,{
                       
                         headers: {
                                     'Content-Type': 'application/json',
                                        'X-CSRFToken': this.token
                         }
                        
                    })
                    .then(res => {
                        console.log(res)
                        this.get_violation()
                this.get_minor_or_grave()
                        this.$q.notify({ //put dollor sign(q)
                              message: `Successfull.. New Violation is successfully saved!`,
                              timeout: 10000, // in milliseconds; 0 means no timeout

                              color: 'orange',
                              textColor: 'white', // if default 'white' doesn't fit
                             icon: 'check', //or  avatar: 'statics/boy-avatar.png',

                             position: 'top', // 'top', 'left', 'bottom-left' etc.

                              })
                    })
                    .catch(err => {
                        console.error(err); 
                        this.$q.notify({ //put dollor sign(q)
                              message: `Unsuccessfull!`,
                              timeout: 10000, // in milliseconds; 0 means no timeout

                              color: 'red',
                              textColor: 'white', // if default 'white' doesn't fit
                             icon: 'error', //or  avatar: 'statics/boy-avatar.png',

                             position: 'top', // 'top', 'left', 'bottom-left' etc.

                              })
                    })
                
                
                },
                new_violation(){
                    this.modal_create_violation = true
                },
                update_minor (){
                    
                    let payload = {
                        "typeofviolation": this.edit_model_type ,
                        "percentage": this.edit_model_percentage_deduction,
                    }
                    axios.put(`${this.global_hostname}/api/MINOR_OR_GRAVE/${this.id_to_update_minor}/`,payload,{
                        
                         headers: {
                                     'Content-Type': 'application/json',
                                        'X-CSRFToken': this.token
                         }
                        
                    })
                    .then(res => {
                        console.log(res)

                        this.get_violation()
                                this.get_minor_or_grave()
                        this.$q.notify({ //put dollor sign(q)
                              message: `Successfully Updated!`,
                              timeout: 10000, // in milliseconds; 0 means no timeout

                              color: 'orange',
                              textColor: 'white', // if default 'white' doesn't fit
                             icon: 'check', //or  avatar: 'statics/boy-avatar.png',

                             position: 'top', // 'top', 'left', 'bottom-left' etc.

                              })
                    })
                    .catch(err => {
                        console.error(err); 
                        this.$q.notify({ //put dollor sign(q)
                              message: `Unsuccessfull!`,
                              timeout: 10000, // in milliseconds; 0 means no timeout

                              color: 'red',
                              textColor: 'white', // if default 'white' doesn't fit
                             icon: 'error', //or  avatar: 'statics/boy-avatar.png',

                             position: 'top', // 'top', 'left', 'bottom-left' etc.

                              })
                    })
                },
                edit_minor(id){
                    this.id_to_update_minor = id
                    this.modal_edit_minor = true
                    var data =  this.typeofviolation
                    var info = data.filter(function(el){
                        return el.id == id
                    })
                    this.edit_model_type = info[0].typeofviolation
                    this.edit_model_percentage_deduction = info[0].percentage

                },
                delete_minor(id){

                        axios.delete(`${this.global_hostname}/api/MINOR_OR_GRAVE/${id}/`,{
                            
                             headers: {
                                         'Content-Type': 'application/json',
                                            'X-CSRFToken': this.token
                             }
                            
                        })
                        .then(res => {
                            console.log(res)

                                this.get_violation()
                                this.get_minor_or_grave()
                        })
                        .catch(err => {
                            console.error(err); 
                        })
                },
                create_new_type (){
                    this.modal_minor = true
                },
                save(){
                    var type = this.model_type
                    var percentage = this.model_percentage_deduction
                    var obj = {
                        "typeofviolation": type,
                        "percentage": percentage,
                    }
                    axios.post(`${this.global_hostname}/api/MINOR_OR_GRAVE/`,obj,{
                       
                         headers: {
                                     'Content-Type': 'application/json',
                                        'X-CSRFToken': this.token
                         }
                        
                    })
                    .then(res => {
                        console.log(res)
                        this.get_violation()
                this.get_minor_or_grave()
                        this.$q.notify({ //put dollor sign(q)
                              message: `Successfully Deleted!`,
                              timeout: 10000, // in milliseconds; 0 means no timeout

                              color: 'orange',
                              textColor: 'white', // if default 'white' doesn't fit
                             icon: 'check', //or  avatar: 'statics/boy-avatar.png',

                             position: 'top', // 'top', 'left', 'bottom-left' etc.

                              })
                    })
                    .catch(err => {
                        console.error(err); 


                        this.$q.notify({ //put dollor sign(q)
                              message: `Unsuccessfull`,
                              timeout: 10000, // in milliseconds; 0 means no timeout

                              color: 'red',
                              textColor: 'white', // if default 'white' doesn't fit
                             icon: 'error', //or  avatar: 'statics/boy-avatar.png',

                             position: 'top', // 'top', 'left', 'bottom-left' etc.

                              })
                    })
                },
                get_minor_or_grave(){

                    axios.get(`${this.global_hostname}/api/MINOR_OR_GRAVE/`,{
                        
                         headers: {
                                     'Content-Type': 'application/json',
                                        'X-CSRFToken': this.token
                         }
                        
                    })
                    .then(res => {
                        console.log(res)
                        this.typeofviolation = res.data
                        var arr = []
                        var options = this.typeofviolation.forEach(function(e,index){ 
                           var a = e.typeofviolation
                                arr.push(a)
                           
                        })
                        this.option_type = arr
                        
                        var temp = []
                        for (let index = 0; index < res.data.length; index++) {
                          const element = res.data[index];
                          temp.push(element.typeofviolation)
                          if(index == res.data.length - 1){
                            temp.push('No Filter')
                            this.OptionMinorGrave = temp
                            // haiget
                          }
                        }
                        
            
                    })
                    .catch(err => {
                        console.error(err); 
                    })
                },
               get_violation(){

                axios.get(`${this.global_hostname}/api/Get_VIOLATIONS/`,{
                    
                 
                   headers: {
                               'Content-Type': 'application/json',
                                  'X-CSRFToken': this.token
                   }
                  
                    
                    })
                .then(res => {
                    this.list_of_violations =  res.data
                    this.rawViolation = res.data
                    setTimeout(() => {
                    this.loadingOffense=false
                  }, 2000);
                })
                .catch(err => {
                    console.error(err); 
                })
               }
            },
            watch: {
              filterOffense : function(){
                this.loadingOffense = true
                var data = this.rawViolation
                if(this.filterOffense == 'No Filter'){
                  this.list_of_violations = data
                  this.filterOffense = ''
                  setTimeout(() => {
                    this.loadingOffense=false
                  }, 2000);
                }else{
                  if(this.filterOffense != ''){
                    var filterinfo = data.filter(
                      (element)=>{
                        return element.graveofminor == this.filterOffense
                      }
                    )
                    this.list_of_violations = filterinfo
                    setTimeout(() => {
                    this.loadingOffense=false
                  }, 2000);
                  } 
                }
                
              }
            },
            mounted() {
                 var hostname = window.location.hostname;
                 var port = window.location.port
        if(port != '' ){

            hostname = hostname+':8000'
                    }
                    else{
                        hostname = hostname
                    }
        
                    this.global_hostname = `${window.location.protocol}//${hostname}`;
                 var csrftoken = Cookies.get('csrftoken');
                this.token = csrftoken

                this.get_violation()
                this.get_minor_or_grave()
            }
})


</script>
{% endblock %}
